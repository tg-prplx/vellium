// Internationalization system
import { createContext, useContext } from "react";

export type Locale = "en" | "ru";

export const translations = {
  en: {
    // App
    "app.name": "SillyTauri",

    // Tabs
    "tab.chat": "Chat",
    "tab.writing": "Writing",
    "tab.characters": "Characters",
    "tab.settings": "Settings",

    // Chat screen
    "chat.title": "Chats",
    "chat.new": "New",
    "chat.pickCharacter": "Pick Character",
    "chat.noCharacters": "No characters imported yet",
    "chat.noCharacter": "No character",
    "chat.noChatYet": "No chats yet",
    "chat.noChatDesc": "Create a new chat or just start typing",
    "chat.startConvo": "Start a conversation",
    "chat.startConvoDesc": "Type a message below to begin. A chat will be created automatically.",
    "chat.regenerate": "Regenerate",
    "chat.compress": "Compress",
    "chat.compressing": "Compressing...",
    "chat.send": "Send",
    "chat.chattingWith": "Chatting with",
    "chat.streaming": "streaming",
    "chat.noModel": "No active model. Configure one in Settings.",
    "chat.model": "Model",
    "chat.fork": "Fork",
    "chat.edit": "Edit",
    "chat.delete": "Delete",
    "chat.save": "Save",
    "chat.cancel": "Cancel",
    "chat.translate": "Translate",
    "chat.translating": "Translating...",
    "chat.translateReplace": "Translate ↻",
    "chat.translateSide": "Show translation below",
    "chat.translateInPlace": "Replace text with translation",
    "chat.showOriginal": "Show original",
    "chat.attachFile": "Attach file (image for vision, text for RAG)",
    "chat.placeholder": "Write your message... (Enter to send, Shift+Enter for new line)",
    "chat.rpPresets": "RP Presets",
    "chat.selectModel": "Select Model",
    "chat.loadModels": "Load",
    "chat.stop": "Stop",
    "chat.multiChar": "Multi-Char",
    "chat.addCharacter": "Add Character",
    "chat.removeCharacter": "Remove",
    "chat.autoConvo": "Auto Conversation",
    "chat.autoConvoDesc": "Characters talk to each other without user input",
    "chat.autoConvoRunning": "Auto-conversation running...",
    "chat.autoConvoStop": "Stop Auto",
    "chat.autoConvoStart": "Start Auto",
    "chat.nextTurn": "Next Turn",
    "chat.turns": "turns",
    "chat.autoTurns": "Auto turns",
    "chat.resend": "Resend",
    "chat.saveSampler": "Save for Chat",
    "chat.samplerSaved": "Saved!",
    "chat.userPersona": "User Persona",
    "chat.selectPersona": "Select Persona",
    "chat.editPersona": "Edit Persona",
    "chat.newPersona": "New Persona",
    "chat.personaName": "Name",
    "chat.personaDesc": "Description",
    "chat.personaPersonality": "Personality",
    "chat.deletePersona": "Delete",
    "chat.setDefault": "Set Default",
    "chat.default": "Default",
    "chat.personas": "Personas",
    "chat.deleteChat": "Delete Chat",
    "chat.confirmDeleteChat": "Delete this chat?",

    // Inspector
    "inspector.title": "Inspector",
    "inspector.authorNote": "Author's Note",
    "inspector.sceneState": "Scene State",
    "inspector.mood": "Mood",
    "inspector.pacing": "Pacing",
    "inspector.intensity": "Intensity",
    "inspector.sampler": "Sampler",
    "inspector.temperature": "Temperature",
    "inspector.topP": "Top P",
    "inspector.freqPenalty": "Freq. Penalty",
    "inspector.presPenalty": "Pres. Penalty",
    "inspector.maxTokens": "Max Tokens",
    "inspector.promptStack": "Prompt Stack",
    "inspector.compressedContext": "Compressed Context",
    "inspector.slow": "Slow",
    "inspector.balanced": "Balanced",
    "inspector.fast": "Fast",

    // Writing screen
    "writing.projects": "Projects",
    "writing.noProjects": "No projects",
    "writing.noProjectsDesc": "Create a project to start writing",
    "writing.creativeWriting": "Creative Writing",
    "writing.chapters": "Chapters",
    "writing.noChapters": "No chapters yet",
    "writing.noChaptersDesc": "Add a chapter to start writing",
    "writing.selectProject": "Select or create a project first",
    "writing.chapter": "+ Chapter",
    "writing.consistency": "Consistency",
    "writing.expand": "Expand",
    "writing.rewrite": "Rewrite",
    "writing.summarize": "Summarize",
    "writing.generate": "Generate",
    "writing.working": "Working...",
    "writing.outline": "Outline",
    "writing.exportMD": "Export MD",
    "writing.exportDOCX": "Export DOCX",
    "writing.consistencyIssues": "Consistency Issues",
    "writing.noIssues": "No issues detected",
    "writing.generationLog": "Generation Log",
    "writing.noActivity": "No activity yet",
    "writing.prompt": "Describe what should happen in the scene...",

    // Characters
    "chars.import": "Import",
    "chars.characters": "Characters",
    "chars.noChars": "No characters yet",
    "chars.noCharsDesc": "Import or create a character to get started",
    "chars.loadSample": "Load Sample",
    "chars.importJSON": "Import",
    "chars.createBlank": "Create Blank",
    "chars.name": "Name",
    "chars.description": "Description",
    "chars.personality": "Personality",
    "chars.scenario": "Scenario",
    "chars.firstMessage": "First Message",
    "chars.systemPrompt": "System Prompt",
    "chars.exampleMessages": "Example Messages",
    "chars.creatorNotes": "Creator Notes",
    "chars.tags": "Tags",

    // Settings
    "settings.basic": "Basic",
    "settings.advanced": "Advanced",
    "settings.prompts": "Prompts",
    "settings.general": "General",
    "settings.theme": "Theme",
    "settings.dark": "Dark",
    "settings.light": "Light",
    "settings.custom": "Custom",
    "settings.textSize": "Text Size",
    "settings.responseLanguage": "Response Language",
    "settings.interfaceLanguage": "Interface Language",
    "settings.fullLocalMode": "Full Local Mode",
    "settings.fullLocalDesc": "Only allow connections to localhost",
    "settings.censorship": "Censorship",
    "settings.censorshipDesc": "Content filtering mode",
    "settings.unfiltered": "Unfiltered",
    "settings.filtered": "Filtered",
    "settings.resetDefaults": "Reset to Defaults",
    "settings.resetAll": "Reset All Settings to Defaults",
    "settings.quickPresets": "Quick Presets",
    "settings.quickAdd": "Quick Add Selected Preset",
    "settings.manualConfig": "Manual Configuration",
    "settings.providerId": "Provider ID",
    "settings.providerName": "Provider Name",
    "settings.baseUrl": "Base URL",
    "settings.apiKey": "API Key",
    "settings.proxyUrl": "Proxy URL (optional)",
    "settings.localOnly": "Local only provider",
    "settings.saveProvider": "Save Provider",
    "settings.test": "Test",
    "settings.refresh": "Refresh",
    "settings.activeModel": "Active Model",
    "settings.provider": "Provider",
    "settings.selectProvider": "Select provider...",
    "settings.loadModels": "Load Models from Provider",
    "settings.selectModel": "Select model...",
    "settings.useModel": "Use This Model in Chat",
    "settings.samplerDefaults": "Sampler Defaults",
    "settings.stopSequences": "Stop Sequences (comma-separated)",
    "settings.defaultSysPrompt": "Default System Prompt",
    "settings.defaultSysPromptDesc": "This is used when the \"system\" prompt block has no custom content.",
    "settings.contextWindow": "Context Window",
    "settings.contextSize": "Context Window Size (tokens)",
    "settings.contextDesc": "Maximum context window for conversations. Older messages will be truncated or compressed.",
    "settings.promptTemplates": "Prompt Templates",
    "settings.promptTemplatesDesc": "Edit the system prompts used throughout the app. Changes are saved automatically.",
    "settings.baseSysPromptDesc": "Base system prompt used when the \"system\" block has no content.",
    "settings.compressModel": "Compress Model",
    "settings.compressModelDesc": "Choose model for context compression (leave empty for active model)",
    "settings.compressProvider": "Compress Provider",
    "settings.mergeRoles": "Merge Consecutive Roles",
    "settings.mergeRolesDesc": "Fix 'roles must alternate user/assistant' error by merging consecutive same-role messages",

    // Prompt template labels
    "prompt.jailbreak": "Jailbreak / Freedom Prompt",
    "prompt.jailbreakDesc": "Used in the jailbreak prompt block for RP chats",
    "prompt.compress": "Compress / Summary Prompt",
    "prompt.compressDesc": "System prompt when compressing chat context",
    "prompt.writerGenerate": "Writer: Generate Draft",
    "prompt.writerGenerateDesc": "System prompt when generating new scenes",
    "prompt.writerExpand": "Writer: Expand Scene",
    "prompt.writerExpandDesc": "System prompt when expanding existing scenes",
    "prompt.writerRewrite": "Writer: Rewrite Scene",
    "prompt.writerRewriteDesc": "System prompt for rewriting. Use {{tone}} as placeholder.",
    "prompt.writerSummarize": "Writer: Summarize Scene",
    "prompt.writerSummarizeDesc": "System prompt for scene summarization",
    "prompt.creativeWriting": "Creative Writing System Prompt",
    "prompt.creativeWritingDesc": "Separate system prompt for the creative writing mode",

    // RP Presets
    "preset.slowburn": "Slow Burn",
    "preset.slowburnDesc": "Slow pacing, emotional buildup, tension",
    "preset.dominant": "Dominant",
    "preset.dominantDesc": "Assertive character behavior, power dynamics",
    "preset.romantic": "Romantic",
    "preset.romanticDesc": "Sweet, tender, emotionally open",
    "preset.action": "Action",
    "preset.actionDesc": "Fast pacing, dynamic scenes, combat",
    "preset.mystery": "Mystery",
    "preset.mysteryDesc": "Suspense, clues, detective atmosphere",
    "preset.submissive": "Submissive",
    "preset.submissiveDesc": "Shy, obedient, eager to please",
    "preset.seductive": "Seductive",
    "preset.seductiveDesc": "Flirty, teasing, sensual atmosphere",
    "preset.gentle_fem": "Gentle (F)",
    "preset.gentle_femDesc": "Soft, caring, emotionally nurturing",
    "preset.rough": "Rough",
    "preset.roughDesc": "Aggressive, primal, intense physicality",
    "preset.passionate": "Passionate",
    "preset.passionateDesc": "Deep desire, emotional intensity, fire",

    // Common
    "common.english": "English",
    "common.russian": "Russian",
  },
  ru: {
    // App
    "app.name": "SillyTauri",

    // Tabs
    "tab.chat": "Чат",
    "tab.writing": "Писательство",
    "tab.characters": "Персонажи",
    "tab.settings": "Настройки",

    // Chat screen
    "chat.title": "Чаты",
    "chat.new": "Новый",
    "chat.pickCharacter": "Выбрать персонажа",
    "chat.noCharacters": "Персонажи ещё не импортированы",
    "chat.noCharacter": "Без персонажа",
    "chat.noChatYet": "Чатов пока нет",
    "chat.noChatDesc": "Создайте новый чат или просто начните печатать",
    "chat.startConvo": "Начните диалог",
    "chat.startConvoDesc": "Напишите сообщение ниже. Чат создастся автоматически.",
    "chat.regenerate": "Пересоздать",
    "chat.compress": "Сжать",
    "chat.compressing": "Сжатие...",
    "chat.send": "Отпр.",
    "chat.chattingWith": "Общение с",
    "chat.streaming": "генерация",
    "chat.noModel": "Модель не выбрана. Настройте в Настройках.",
    "chat.model": "Модель",
    "chat.fork": "Ветвь",
    "chat.edit": "Ред.",
    "chat.delete": "Удалить",
    "chat.save": "Сохр.",
    "chat.cancel": "Отмена",
    "chat.translate": "Перевод",
    "chat.translating": "Перевод...",
    "chat.translateReplace": "Перевод ↻",
    "chat.translateSide": "Показать перевод рядом",
    "chat.translateInPlace": "Заменить текст переводом",
    "chat.showOriginal": "Показать оригинал",
    "chat.attachFile": "Прикрепить файл (изображение для vision, текст для RAG)",
    "chat.placeholder": "Напишите сообщение... (Enter — отправить, Shift+Enter — новая строка)",
    "chat.rpPresets": "RP Пресеты",
    "chat.selectModel": "Выбрать модель",
    "chat.loadModels": "Загр.",
    "chat.stop": "Стоп",
    "chat.multiChar": "Мульти-перс.",
    "chat.addCharacter": "Добавить персонажа",
    "chat.removeCharacter": "Убрать",
    "chat.autoConvo": "Авто-диалог",
    "chat.autoConvoDesc": "Персонажи общаются друг с другом без участия пользователя",
    "chat.autoConvoRunning": "Авто-диалог запущен...",
    "chat.autoConvoStop": "Стоп авто",
    "chat.autoConvoStart": "Старт авто",
    "chat.nextTurn": "След. ход",
    "chat.turns": "ходов",
    "chat.autoTurns": "Авто ходы",
    "chat.resend": "Повторить",
    "chat.saveSampler": "Сохр. для чата",
    "chat.samplerSaved": "Сохранено!",
    "chat.userPersona": "Персона",
    "chat.selectPersona": "Выбрать персону",
    "chat.editPersona": "Ред. персону",
    "chat.newPersona": "Новая персона",
    "chat.personaName": "Имя",
    "chat.personaDesc": "Описание",
    "chat.personaPersonality": "Характер",
    "chat.deletePersona": "Удалить",
    "chat.setDefault": "По умолчанию",
    "chat.default": "По умолч.",
    "chat.personas": "Персоны",
    "chat.deleteChat": "Удалить чат",
    "chat.confirmDeleteChat": "Удалить этот чат?",

    // Inspector
    "inspector.title": "Инспектор",
    "inspector.authorNote": "Заметка автора",
    "inspector.sceneState": "Состояние сцены",
    "inspector.mood": "Настроение",
    "inspector.pacing": "Темп",
    "inspector.intensity": "Интенсивность",
    "inspector.sampler": "Сэмплер",
    "inspector.temperature": "Температура",
    "inspector.topP": "Top P",
    "inspector.freqPenalty": "Штраф частоты",
    "inspector.presPenalty": "Штраф присутствия",
    "inspector.maxTokens": "Макс. токенов",
    "inspector.promptStack": "Стек промптов",
    "inspector.compressedContext": "Сжатый контекст",
    "inspector.slow": "Медленный",
    "inspector.balanced": "Сбалансированный",
    "inspector.fast": "Быстрый",

    // Writing screen
    "writing.projects": "Проекты",
    "writing.noProjects": "Нет проектов",
    "writing.noProjectsDesc": "Создайте проект, чтобы начать писать",
    "writing.creativeWriting": "Творческое письмо",
    "writing.chapters": "Главы",
    "writing.noChapters": "Глав пока нет",
    "writing.noChaptersDesc": "Добавьте главу, чтобы начать писать",
    "writing.selectProject": "Сначала выберите или создайте проект",
    "writing.chapter": "+ Глава",
    "writing.consistency": "Проверка",
    "writing.expand": "Развернуть",
    "writing.rewrite": "Переписать",
    "writing.summarize": "Резюме",
    "writing.generate": "Сгенерировать",
    "writing.working": "Работает...",
    "writing.outline": "Структура",
    "writing.exportMD": "Экспорт MD",
    "writing.exportDOCX": "Экспорт DOCX",
    "writing.consistencyIssues": "Проблемы согласованности",
    "writing.noIssues": "Проблем не обнаружено",
    "writing.generationLog": "Лог генерации",
    "writing.noActivity": "Активности пока нет",
    "writing.prompt": "Опишите, что должно произойти в сцене...",

    // Characters
    "chars.import": "Импорт",
    "chars.characters": "Персонажи",
    "chars.noChars": "Персонажей пока нет",
    "chars.noCharsDesc": "Импортируйте или создайте персонажа",
    "chars.loadSample": "Загрузить пример",
    "chars.importJSON": "Импорт",
    "chars.createBlank": "Создать пустого",
    "chars.name": "Имя",
    "chars.description": "Описание",
    "chars.personality": "Личность",
    "chars.scenario": "Сценарий",
    "chars.firstMessage": "Первое сообщение",
    "chars.systemPrompt": "Системный промпт",
    "chars.exampleMessages": "Примеры сообщений",
    "chars.creatorNotes": "Заметки создателя",
    "chars.tags": "Теги",

    // Settings
    "settings.basic": "Основные",
    "settings.advanced": "Расширенные",
    "settings.prompts": "Промпты",
    "settings.general": "Общие",
    "settings.theme": "Тема",
    "settings.dark": "Тёмная",
    "settings.light": "Светлая",
    "settings.custom": "Своя",
    "settings.textSize": "Размер текста",
    "settings.responseLanguage": "Язык ответов",
    "settings.interfaceLanguage": "Язык интерфейса",
    "settings.fullLocalMode": "Локальный режим",
    "settings.fullLocalDesc": "Разрешить подключения только к localhost",
    "settings.censorship": "Цензура",
    "settings.censorshipDesc": "Режим фильтрации контента",
    "settings.unfiltered": "Без фильтра",
    "settings.filtered": "С фильтром",
    "settings.resetDefaults": "Сбросить настройки",
    "settings.resetAll": "Сбросить все настройки",
    "settings.quickPresets": "Быстрые пресеты",
    "settings.quickAdd": "Быстро добавить пресет",
    "settings.manualConfig": "Ручная настройка",
    "settings.providerId": "ID провайдера",
    "settings.providerName": "Имя провайдера",
    "settings.baseUrl": "Базовый URL",
    "settings.apiKey": "API ключ",
    "settings.proxyUrl": "Прокси URL (опционально)",
    "settings.localOnly": "Только локальный провайдер",
    "settings.saveProvider": "Сохранить провайдера",
    "settings.test": "Тест",
    "settings.refresh": "Обновить",
    "settings.activeModel": "Активная модель",
    "settings.provider": "Провайдер",
    "settings.selectProvider": "Выберите провайдера...",
    "settings.loadModels": "Загрузить модели",
    "settings.selectModel": "Выберите модель...",
    "settings.useModel": "Использовать эту модель",
    "settings.samplerDefaults": "Настройки сэмплера",
    "settings.stopSequences": "Стоп-последовательности (через запятую)",
    "settings.defaultSysPrompt": "Системный промпт по умолчанию",
    "settings.defaultSysPromptDesc": "Используется, если блок \"system\" не имеет содержимого.",
    "settings.contextWindow": "Окно контекста",
    "settings.contextSize": "Размер окна контекста (токены)",
    "settings.contextDesc": "Максимальный размер контекста. Старые сообщения будут обрезаны или сжаты.",
    "settings.promptTemplates": "Шаблоны промптов",
    "settings.promptTemplatesDesc": "Редактируйте системные промпты приложения. Изменения сохраняются автоматически.",
    "settings.baseSysPromptDesc": "Базовый системный промпт, когда блок \"system\" пуст.",
    "settings.compressModel": "Модель сжатия",
    "settings.compressModelDesc": "Модель для сжатия контекста (пусто = активная модель)",
    "settings.compressProvider": "Провайдер сжатия",
    "settings.mergeRoles": "Объединять одинаковые роли",
    "settings.mergeRolesDesc": "Исправляет ошибку 'roles must alternate user/assistant' объединением подряд идущих сообщений одной роли",

    // Prompt template labels
    "prompt.jailbreak": "Jailbreak / Промпт свободы",
    "prompt.jailbreakDesc": "Используется в блоке jailbreak для RP чатов",
    "prompt.compress": "Промпт сжатия / резюме",
    "prompt.compressDesc": "Системный промпт при сжатии контекста чата",
    "prompt.writerGenerate": "Писатель: Генерация черновика",
    "prompt.writerGenerateDesc": "Системный промпт при генерации новых сцен",
    "prompt.writerExpand": "Писатель: Развёртывание сцены",
    "prompt.writerExpandDesc": "Системный промпт при развёртывании существующих сцен",
    "prompt.writerRewrite": "Писатель: Переписать сцену",
    "prompt.writerRewriteDesc": "Системный промпт для переписывания. {{tone}} — плейсхолдер тона.",
    "prompt.writerSummarize": "Писатель: Резюме сцены",
    "prompt.writerSummarizeDesc": "Системный промпт для создания резюме сцены",
    "prompt.creativeWriting": "Системный промпт Creative Writing",
    "prompt.creativeWritingDesc": "Отдельный системный промпт для режима творческого письма",

    // RP Presets
    "preset.slowburn": "Медленное развитие",
    "preset.slowburnDesc": "Медленный темп, эмоциональное нарастание",
    "preset.dominant": "Доминантный",
    "preset.dominantDesc": "Напористое поведение, динамика власти",
    "preset.romantic": "Романтика",
    "preset.romanticDesc": "Нежный, трогательный, эмоционально открытый",
    "preset.action": "Экшн",
    "preset.actionDesc": "Быстрый темп, динамичные сцены, бой",
    "preset.mystery": "Мистерия",
    "preset.mysteryDesc": "Саспенс, улики, детективная атмосфера",
    "preset.submissive": "Покорный",
    "preset.submissiveDesc": "Застенчивый, послушный, стремится угодить",
    "preset.seductive": "Соблазнительный",
    "preset.seductiveDesc": "Флирт, дразнящий, чувственная атмосфера",
    "preset.gentle_fem": "Нежная (Ж)",
    "preset.gentle_femDesc": "Мягкая, заботливая, эмоционально тёплая",
    "preset.rough": "Грубый",
    "preset.roughDesc": "Агрессивный, первобытный, интенсивная физичность",
    "preset.passionate": "Страстный",
    "preset.passionateDesc": "Глубокое желание, эмоциональная интенсивность",

    // Common
    "common.english": "Английский",
    "common.russian": "Русский",
  }
} as const;

export type TranslationKey = keyof typeof translations.en;

export const I18nContext = createContext<Locale>("en");

export function useI18n() {
  const locale = useContext(I18nContext);
  function t(key: TranslationKey): string {
    return translations[locale]?.[key] ?? translations.en[key] ?? key;
  }
  return { t, locale };
}
